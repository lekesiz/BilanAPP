<div class="container py-4">
    <h1 class="mb-4">Gestion des Forfaits</h1>

     {{> messages}}

     {{!-- TODO: Yeni Forfait ekleme butonu? (Şimdilik sadece düzenleme) --}}

    <div class="card shadow-sm">
        <div class="card-body p-0">
            {{#if forfaits.length}}
                <div class="table-responsive">
                    <table class="table table-striped table-hover table-sm mb-0">
                         <thead class="table-light">
                             <tr>
                                 <th>Nom du Forfait</th>
                                 <th>Description</th>
                                 <th>Crédits par Défaut</th>
                                 <th>Fonctionnalités Clés</th>
                                 <th>Actions</th>
                             </tr>
                         </thead>
                         <tbody>
                             {{#each forfaits}}
                                 <tr>
                                     <td class="fw-bold">{{name}}</td>
                                     <td>{{#if description}}{{truncate description 60}}{{else}}-{{/if}}</td>
                                     <td class="text-center">{{defaultCredits}}</td>
                                     <td>
                                         {{!-- `with` helper'ı ile `split` sonucunu değişkene ata (`featureLines`) --}}
                                         {{#with (split features '\n') as |featureLines|}}
                                             {{#if featureLines.length}}
                                                 <ul class="list-unstyled mb-0 small">
                                                     {{#each (limit featureLines 3)}}
                                                         {{#if (isNonEmptyString (trim this))}}
                                                            <li>- {{trim this}}</li>
                                                         {{/if}}
                                                     {{/each}}
                                                     {{!-- `#gt` block helper'ı kullanıldı --}}
                                                     {{#gt (length featureLines) 3}}
                                                        <li>...</li>
                                                     {{/gt}}
                                                 </ul>
                                              {{else}}
                                                <span class="text-muted">-</span>
                                             {{/if}}
                                         {{else}}
                                              <span class="text-muted">-</span>
                                         {{/with}}
                                     </td>
                                     <td>
                                         <a href="/admin/forfaits/{{name}}/edit" class="btn btn-sm btn-outline-secondary" title="Modifier Forfait"><i class="fas fa-edit"></i></a>
                                         {{!-- TODO: Silme butonu eklenebilir (dikkatlice!) --}}
                                     </td>
                                 </tr>
                             {{/each}}
                         </tbody>
                     </table>
                 </div>
            {{else}}
                 <p class="text-muted text-center p-4 mb-0">Aucun forfait trouvé dans la base de données.</p>
            {{/if}}
        </div>
    </div>
</div> 